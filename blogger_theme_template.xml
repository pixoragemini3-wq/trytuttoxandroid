
<!DOCTYPE html>
<html b:css='false' b:defaultmessages='false' b:layoutsVersion='3' b:responsive='true' xmlns='http://www.w3.org/1999/xhtml' xmlns:b='http://www.google.com/2005/gml/b' xmlns:data='http://www.google.com/charts/static/components/2.0/data' xmlns:expr='http://www.google.com/2005/gml/expr'>
<head>
<meta charset='UTF-8' />
<meta content='width=device-width, initial-scale=1.0' name='viewport' />
<title><data:blog.pageTitle/></title>

<!-- SEO & SOCIAL META TAGS (Server Side) -->
<!-- FIX: WhatsApp requires images > 300px. Blogger default thumbnails are too small. -->
<b:if cond='data:view.isPost'>
  <!-- Open Graph for Facebook/WhatsApp/LinkedIn -->
  <meta expr:content='data:blog.pageName' property='og:title'/>
  <meta content='article' property='og:type'/>
  <meta expr:content='data:blog.canonicalUrl' property='og:url'/>
  
  <!-- Description -->
  <b:if cond='data:blog.metaDescription'>
    <meta expr:content='data:blog.metaDescription' property='og:description'/>
  <b:else/>
    <meta expr:content='data:post.snippet' property='og:description'/>
  </b:if>
  
  <!-- Image Handling: Prioritize High Res using resizeImage operator -->
  <b:if cond='data:post.featuredImage'>
    <meta expr:content='resizeImage(data:post.featuredImage, 1200)' property='og:image'/>
  <b:else/>
    <b:if cond='data:post.firstImageUrl'>
      <meta expr:content='resizeImage(data:post.firstImageUrl, 1200)' property='og:image'/>
    <b:else/>
       <!-- Fallback Image if no image in post -->
       <meta content='https://i.imgur.com/l7YwbQe.png' property='og:image'/>
    </b:if>
  </b:if>
  
  <!-- Twitter Cards -->
  <meta content='summary_large_image' name='twitter:card'/>
  <meta expr:content='data:blog.pageName' name='twitter:title'/>
  <b:if cond='data:post.featuredImage'>
    <meta expr:content='resizeImage(data:post.featuredImage, 1200)' name='twitter:image'/>
  <b:else/>
     <b:if cond='data:post.firstImageUrl'>
        <meta expr:content='resizeImage(data:post.firstImageUrl, 1200)' name='twitter:image'/>
     </b:if>
  </b:if>

<b:else/>
  <!-- Homepage Meta -->
  <meta expr:content='data:blog.title' property='og:title'/>
  <meta content='website' property='og:type'/>
  <meta expr:content='data:blog.canonicalUrl' property='og:url'/>
  <meta expr:content='data:blog.metaDescription' property='og:description'/>
  <meta content='https://i.imgur.com/l7YwbQe.png' property='og:image'/>
</b:if>

<meta content='TuttoXAndroid' property='og:site_name'/>
<meta content='it_IT' property='og:locale'/>
<!-- ============================================ -->

<b:skin><![CDATA[
  #navbar-iframe { display: none !important; }
  body { margin: 0; padding: 0; background: #ffffff; -webkit-font-smoothing: antialiased; }
  /* Loader styling */
  #root:empty::before {
    content: '';
    position: fixed;
    top: 50%;
    left: 50%;
    width: 50px;
    height: 50px;
    margin: -25px 0 0 -25px;
    border: 4px solid #f3f3f3;
    border-top: 4px solid #e31b23;
    border-radius: 50%;
    animation: spin 1s linear infinite;
    z-index: 9999;
  }
  @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
]]></b:skin>

<script>
  // Global storage for posts
  window.bloggerNativePosts = [];
  window.currentSinglePost = null;
</script>

<script src='https://cdn.tailwindcss.com'></script>
<link href='https://fonts.googleapis.com/css2?family=Inter:wght@400;700;800;900&amp;family=Saira+Extra+Condensed:wght@700;800;900&amp;display=swap' rel='stylesheet'/>

<script type='importmap'>
<![CDATA[
{
  "imports": {
    "react": "https://esm.sh/react@18.2.0?v=fixed",
    "react/jsx-runtime": "https://esm.sh/react@18.2.0/jsx-runtime?v=fixed",
    "react-dom": "https://esm.sh/react-dom@18.2.0?v=fixed",
    "react-dom/client": "https://esm.sh/react-dom@18.2.0/client?v=fixed",
    "react-router-dom": "https://esm.sh/react-router-dom@6.22.3?external=react,react-dom&v=fixed",
    "react-helmet-async": "https://esm.sh/react-helmet-async@2.0.4?external=react,react-dom&v=fixed",
    "@google/genai": "https://esm.sh/@google/genai@^1.41.0"
  }
}
]]>
</script>
</head>
<body class='bg-white'>
  
  <!-- DATA BRIDGE SECTION -->
  <div style='display:none;'>
    <b:section id='content-bridge' name='Dati Blog' showaddelement='false'>
      <b:widget id='Blog1' locked='true' title='Post del blog' type='Blog' visible='true'>
        <b:includable id='main'>
          
          <!-- LOGICA PER PAGINA SINGOLO POST -->
          <b:if cond='data:view.isPost'>
            <b:loop values='data:posts' var='post'>
              <!-- Usiamo una TEXTAREA per preservare l'HTML grezzo senza rompere il JS -->
              <textarea expr:id='"single-post-body-" + data:post.id' style='display:none;'><data:post.body/></textarea>
              
              <script>
                (function() {
                  var ta = document.getElementById("single-post-body-<data:post.id/>");
                  window.currentSinglePost = {
                    id: "<data:post.id/>",
                    title: "<data:post.title.jsEscaped/>",
                    excerpt: "<data:post.snippet.jsEscaped/>",
                    content: ta ? ta.value : "",
                    category: "<b:if cond='data:post.labels'><b:loop values='data:post.labels' var='label' index='i'><b:if cond='data:i == 0'><data:label.name.jsEscaped/></b:if></b:loop><b:else/>News</b:if>",
                    tags: [<b:if cond='data:post.labels'><b:loop values='data:post.labels' var='label'> "<data:label.name.jsEscaped/>", </b:loop></b:if>],
                    imageUrl: "<b:if cond='data:post.featuredImage'><data:post.featuredImage/><b:else/><b:if cond='data:post.thumbnailUrl'><data:post.thumbnailUrl/><b:else/>https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?auto=format&amp;fit=crop&amp;q=80&amp;w=800</b:if></b:if>",
                    author: "<data:post.author.name.jsEscaped/>",
                    date: "<data:post.date.date.jsEscaped/>",
                    url: "<data:post.url.canonical/>"
                  };
                  // Also add to the main array so router can find it
                  window.bloggerNativePosts.push(window.currentSinglePost);
                })();
              </script>
            </b:loop>
          </b:if>

          <!-- LOGICA PER HOMEPAGE / ARCHIVI (Carichiamo solo snippet per performance) -->
          <b:if cond='!data:view.isPost'>
            <b:loop values='data:posts' var='post'>
              <script>
                window.bloggerNativePosts.push({
                  id: "<data:post.id/>",
                  title: "<data:post.title.jsEscaped/>",
                  excerpt: "<data:post.snippet.jsEscaped/>",
                  content: "", /* Contento vuoto in home per non appesantire */
                  category: "<b:if cond='data:post.labels'><b:loop values='data:post.labels' var='label' index='i'><b:if cond='data:i == 0'><data:label.name.jsEscaped/></b:if></b:loop><b:else/>News</b:if>",
                  tags: [<b:if cond='data:post.labels'><b:loop values='data:post.labels' var='label'> "<data:label.name.jsEscaped/>", </b:loop></b:if>],
                  imageUrl: "<b:if cond='data:post.featuredImage'><data:post.featuredImage/><b:else/><b:if cond='data:post.thumbnailUrl'><data:post.thumbnailUrl/><b:else/>https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?auto=format&amp;fit=crop&amp;q=80&amp;w=800</b:if></b:if>",
                  author: "<data:post.author.name.jsEscaped/>",
                  date: "<data:post.date.date.jsEscaped/>",
                  url: "<data:post.url.canonical/>"
                });
              </script>
            </b:loop>
          </b:if>

        </b:includable>
      </b:widget>
    </b:section>
  </div>

  <div id='root'></div>
  
  <script type='module'>
    //<![CDATA[
    const cacheBuster = "v" + new Date().getTime(); 
    // CHANGE THIS URL TO YOUR GITHUB PAGES URL OR HOSTING IF NOT USING LOCAL
    import(`https://esm.sh/gh/pixoragemini3-wq/trytuttoxandroid/index.tsx?deps=react@18.2.0,react-dom@18.2.0,react-router-dom@6.22.3&v=${cacheBuster}`)
    .catch(err => {
      console.error("CRITICAL ERROR LOADING APP:", err);
      const root = document.getElementById('root');
      root.innerHTML = `
        <div style="font-family: sans-serif; text-align: center; padding: 40px;">
          <h1 style="color: #e31b23;">Caricamento in corso...</h1>
          <p>Se vedi questo messaggio per molto tempo, ricarica la pagina.</p>
        </div>
      `;
    });
    //]]>
  </script>
</body>
</html>
